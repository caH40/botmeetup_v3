# Планирование разработки проекта

3.1.0 +инициализация бота;  
3.1.1 +подключение БД;  
3.1.2 +мидлевар проверки состоит ли пользователь в группе объявлений или нет;  
3.1.3 +команда /start;  
3.1.4 +логирование через winston js;  
3.1.5 +создание readme.md;  
3.1.6 +команда /help;  
3.1.7 +команда /rideon;  
3.1.8 +обработка кнопки "выбор даты старта";  
3.1.9 +добавление action для всех кнопок главного меню rideon";  
3.1.10 +обработка кнопки "выбор времени старта";  
3.1.11 +обработка кнопки "выбор дистанции";  
3.1.12 +обработка кнопки "выбор средней скорости";  
3.1.13 +подключение сцены;  
3.1.14 +сцена описания заезда;  
3.1.15 +сцена постера для объявления;  
3.1.16 +просмотр создаваемого объявления;  
3.1.17 +публикация объявления в телеграм и сохранение в БД;  
3.1.18 +удаление сообщений в которых нет необходимости;  
3.1.19 +добавление погоды в объявление о велозаезде;  
3.1.20 +добавление голосования в дискуссионную группу при создании объявления;  
3.1.21 +добавление погоды в дискуссионную группу при создании объявления;  
3.1.22 +обработка голосования участвующих в заезде райдеров;  
3.1.23 +исправление багов при обновлении сообщения с погодой в дискуссионной группе;  
3.1.24 +обновление постов по таймеру;  
3.1.25 +использование ранее созданного объявления;  
3.1.26 +удаление/редактирование объявления;  
3.2.1 +обновление всех зависимостей и библиотек;    
3.2.2 +запросы на API погоды через прокси. Устранение багов;  
3.2.3 +изменение свойства isLastUpdated если старт уже был;  
3.2.4 +изменение дат заезда на ru локаль;  
3.2.5 +проверка получения api key weather;  
3.2.6 +задана локаль Ru в методах класса Date;  
3.3.1 +обновлён eslint;  
3.3.2 +замена кнопки выбора места старта на кнопку вебапп;  
3.3.3 +получение гео данных для места страта и погоды и сохранение данных в сессии;  
3.3.4 +изменение структуры объекта гео локации. Сохранение гео локаций в БД;  
3.3.5 +запрос с API данных погоды для заездов и сохранение в БД;  
3.3.6 +сохранение погоды в БД только для даты старта заезда;  
3.3.7 +исправление функциональности добавления прогноза погоды в дискуссию объявления о велозаезде;  
3.3.8 +исправление таймеров для обновляемых сущностей;  
3.3.9 +добавлены активные ссылки на яндекс карты по координатам места старта и погоды;  
3.3.10 +сохранение локаций места старта и погоды в сессию вынесены в отдельные модули;  
3.3.11 +сохранение локаций места старта и погоды при редактировании объявления;  
3.3.12 +исправлены мелкие баги;  
3.3.13 +исправлен баг с билдом;  
3.3.14 +исправлены баги связанные с переходом на новую версию телеграф;  
3.3.15 +изменена логика проверки получаемых данных из переменных окружения;  
3.3.16 +закомментированы тестовые команды;  
3.3.17 +добавлен скрипт копирования .env в build папку;  
3.3.18 +очистка хранилища гео данных пользователя перед созданием нового объявления;  


-после сохранения изменений в объявление (редактирование) обновлять данные погоды, так как могло измениться место мониторинга погоды;  
-очистка старых (промежуточных) сообщений при взаимодействии с ботом;  
-при использовании ctx.session.messageDel и кнопки возврата в главное меню, происходил "лишнее"
удаление из кнопки возврата в главное меню;  
-определиться куда складывать все тексты, найти рабочие паттерны;  
-для кнопки возврата в главное меню сделать выбор : создавать новое меню или изменять старое
сообщение;  
-при обработке голосования сразу при запросе поста из БД проверять актуальность объявления и
сообщать об этом пользователю;  
-добавить обновление свойства isLastUpdated если заезд стартовал;  
-удалить BotSetup схему и все связанные с ней пути; -перенести формы сообщений из папки modules
в папку forms;  
-проверка актуальных объявлений, где-то по времени из post, а где то по свойству из post
isLastUpdated;  
 -как можно в winstonjs сохранять в файл в формате JSON. По умолчанию новая информация добавляется
строкой без разграничения между записями логов;  
-сохранение номеров сообщений для последующего удаления из одного места в коде;

## временные решения

+при редактировании поста найти решения о проверке вносимых изменений, есть они или нет, если
нет изменений сейчас выбрасывается ошибка;(текущее решение: игнорируются данные ошибки в
обработчике ошибок)
